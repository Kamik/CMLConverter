Процедура ОбновитьКаталог(ИмяФайла)
	
	
	
	//но перед этим надо файлики разобрать
	ТаблицаКаталога = ИнициализироватьТаблицуДляЗагрузкиКаталога();
	
	Источник = Новый XBase;
	Источник.ОткрытьФайл(ИмяФайла);
	
	КодыЕдиницИзмерения = КодыЕдиницИзмерения();
	
	Сч=0;
	Пока Источник.Следующая() Цикл
		
		Сч=Сч+1;
		Если Сч=1000 Тогда
//			Прервать;//отладка
		КонецЕсли;
		
		Нов = ТаблицаКаталога.Добавить();
		
		Нов.Штрихкод				= СокрЛП(Источник.SHKOD);
		Нов.Наименование			= СокрЛП(Источник.NAME);
		Нов.БазоваяЕдиница			= КодыЕдиницИзмерения.Получить(СокрЛП(Источник.EDIZM));//преобразовать
		
		Если Не ЗначениеЗаполнено(Нов.БазоваяЕдиница) Тогда
			Сообщить(Источник.EDIZM);
		КонецЕсли;
		//Сообщить(Источник.SHKOD);
		
	КонецЦикла;
	Источник.ЗакрытьФайл();
	
	
	Тип = мФабрикаXDTO().Тип(xmlПространствоИменСообщений(),"КоммерческаяИнформация");
	НовОбъект = мФабрикаXDTO().Создать(Тип);
	НовОбъект.ВерсияСхемы = "2.08";
	
	ЗаполнитьТовары(НовОбъект,ТаблицаКаталога);
	
	
	//будем делать таке вещи:
	// 1. Описывать набор свойств, за исключением стандартных
	// 2. Описывать дерево групп
	// 3. Описывать сами товары
	
	Запись = Новый ЗаписьXML;
	Запись.ОткрытьФайл(ИмяФайла+".xml");
	Запись.ЗаписатьОбъявлениеXML();
	мФабрикаXDTO().ЗаписатьXML(Запись,НовОбъект);
	Запись.Закрыть();
	
КонецПроцедуры